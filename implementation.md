# Этапы реализации приложения

Перед началом реализации приложения мы ожидаем от аналитики хотя бы sequence-диаграммы.

## Этап I. Проектирование бизнес-сущностей.

На этом этапе мы описываем бизнес-сущности и связи между ними.

## Этап II. Проектирование сервисов бизнес-логики.

Вторым этапом является описание требуемой функциональности через интерфейсы. 
Мы можем полностью спроектировать основные узлы приложения через интерфейсы, не написав ни одной строчки реализации. 
Имея интерфейсный скелет приложения, мы можем приступать к написанию тестов.

Данный этап проектирования включает в себя составление блок-схем.

## Этап III. Написание тестов и реализация бизнес-логики.

Имея готовые бизнес-сущности и бизнес-логику, основанную на интерфейсном скелете, мы можем приступить к написанию тестов. 
**Test Driven Development** - очень непривычный подход для многих разработчиков, и поэтому внутри каждой команды допускается самостоятельное определение, когда будут написаны тесты - до реализации основной функциональности или после. 
Предлагаем две стратегии на выбор:

1. Написание тестов ДО реализации функциональности. Сначала пишется тест, благо, после второго этапа разработки, для этого есть всё необходимое - потом реализуется функциональность так, чтобы тест проходил.
2. Написание тестов ВО ВРЕМЯ реализации функциональности. Сначала пишется функциональность, потом, сразу - тест. Функциональность, не покрытая тестами, не допускается в релиз.

Реализация бизнес-логики в части доступа к данным не может не включать в себя описание DAO. 
Но DAO не относится к бизнес-логике. 
Здесь возможны два варианта:

1. Реализация мок-сервисов DAO на время реализации третьего этапа. Такие сервисы проходят под специфическим профилем (например: mock-dao). Как результат, у нас уже будут готовые моки DAO, которые могут пригодиться для тестирования бизнес-логики сервиса "из коробки" в каком угодно окружении под моковым профилем.
2. Реализация сервисов DAO в целевом виде. Но нужно понимать, что это очень трудоёмкий процесс, включающий описание репозиторных сущностей, маперов и логики DAO.

Способ необходимо выбирать из специфики сервиса. 
Если тестирование затрагивает stateless операции, тогда предпочтителен первый способ. 
Если, к примеру, при тестировании необходимо использовать цепочку вызовов с реальным id, больше подойдёт второй подход.

## Этап  IV. Интеграция.

На этом этапе, происходит интеграция с внешними интерфейсами - репозиторием, клиентами.

Для каждого случая, будь то репозиторий или клиент, сначала описываются модели - репозиторные сущности для базы данных / модели API для клиентов. 
Далее, описывается мапинг с бизнес-моделями. 
В конце описываются интерфейсы и их реализация. 
В целом, этот подход повторяет этапы 1-3 для создания приложений, в масштабе DAO.